<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>AAé•·ç·¨ã¾ã¨ã‚ã‚µã‚¤ãƒˆ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    ul {
      list-style-type: none;
      padding-left: 20px;
    }
    li {
      margin: 2px 0;
    }
    .folder::before {
      content: "ğŸ“ ";
    }
    .file::before {
      content: "ğŸ“„ ";
    }
    .toggle {
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>AAé•·ç·¨ã¾ã¨ã‚ã‚µã‚¤ãƒˆ</h1>
  <div id="tree">èª­ã¿è¾¼ã¿ä¸­â€¦</div>

  <script>
    // ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±ï¼ˆå¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ï¼‰
    const owner = "yaruojson";
    const repo = "yaruojson.github.io";
    const branch = "main";

    // GitHub API ã§ãƒ„ãƒªãƒ¼æƒ…å ±ã‚’å–å¾—ï¼ˆrecursive=1 ã§å…¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ã‚’å–å¾—ï¼‰
    fetch(`https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`)
      .then(response => response.json())
      .then(data => {
        if (data.tree) {
          // ã€Œindex.htmlã€ã‚’é™¤å¤–ã—ãŸãƒªã‚¹ãƒˆã‚’ä½œæˆ
          const filteredTree = data.tree.filter(item => item.path !== "index.html");
          // ãƒ•ãƒ©ãƒƒãƒˆãªãƒªã‚¹ãƒˆã‹ã‚‰ãƒ„ãƒªãƒ¼æ§‹é€ ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
          const treeData = buildTree(filteredTree);
          // ãƒ„ãƒªãƒ¼ã‚’HTMLã¨ã—ã¦æç”»
          const treeContainer = document.getElementById("tree");
          treeContainer.innerHTML = "";
          treeContainer.appendChild(renderTree(treeData));
        } else {
          console.error("ãƒ„ãƒªãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:", data);
        }
      })
      .catch(error => {
        console.error("ã‚¨ãƒ©ãƒ¼:", error);
      });

    // ãƒ•ãƒ©ãƒƒãƒˆãªé…åˆ—ã‹ã‚‰ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ„ãƒªãƒ¼ã‚’ä½œæˆ
    function buildTree(tree) {
      const root = {};
      tree.forEach(item => {
        const parts = item.path.split('/');
        let current = root;
        parts.forEach((part, index) => {
          if (!current[part]) {
            current[part] = {
              __data: (index === parts.length - 1 ? item : null),
              __children: {}
            };
          }
          current = current[part].__children;
        });
      });
      return root;
    }

    // å†å¸°çš„ã«ãƒ„ãƒªãƒ¼ã‚’HTMLï¼ˆ<ul>ï¼‰ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    function renderTree(node) {
      const ul = document.createElement("ul");
      for (const key in node) {
        const li = document.createElement("li");
        const item = node[key];
        const hasChildren = Object.keys(item.__children).length > 0;
        // å­è¦ç´ ãŒã‚ã‚‹å ´åˆã¯ãƒ•ã‚©ãƒ«ãƒ€ã¨ã—ã¦æ‰±ã„ã€ã‚¯ãƒªãƒƒã‚¯ã§é–‹é–‰å¯èƒ½ã«ã™ã‚‹
        if (hasChildren) {
          const span = document.createElement("span");
          span.textContent = key;
          span.classList.add("folder", "toggle");
          span.addEventListener("click", function(e) {
            const nextUl = this.nextElementSibling;
            if (nextUl) {
              nextUl.style.display = nextUl.style.display === "none" ? "block" : "none";
            }
            e.stopPropagation();
          });
          li.appendChild(span);
          li.appendChild(renderTree(item.__children));
        } else {
          // ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆã€ãƒªãƒ³ã‚¯ã‚’è¨­å®š
          const a = document.createElement("a");
          a.textContent = key;
          // ãƒªãƒ³ã‚¯å…ˆã¯GitHub Pagesä¸Šã®ç›¸å¯¾ãƒ‘ã‚¹ï¼ˆãƒ«ãƒ¼ãƒˆã‹ã‚‰ã®ãƒ‘ã‚¹ï¼‰
          a.href = "./" + item.__data.path;
          a.classList.add("file");
          li.appendChild(a);
        }
        ul.appendChild(li);
      }
      return ul;
    }
  </script>
  <br>ã€èª¬æ˜ã€‘ï¼š<br>
   å½“ã‚µã‚¤ãƒˆã¯2chã®AAé•·ç·¨ä½œå“ã‚’è¨˜äº‹ã«ã¾ã¨ã‚ã¦å ±é“ã€ç´¹ä»‹ã™ã‚‹ã‚µã‚¤ãƒˆã§ã™ã€‚<br>
  ãƒãƒ³ã‚¸ãƒ£ãƒ³ãƒ«ã§ã€ç®¡ç†äººã®æ°—ã«ãªã£ãŸã‚¹ãƒ¬ã‚’ç·¨é›†ã—ã€ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚<br>
  <br>
ã€å„æ¨©åˆ©ç­‰ã«ã¤ã„ã¦ã€‘ <br>
å½“ã‚µã‚¤ãƒˆã§ç´¹ä»‹ã—ã¦ã„ã‚‹è¨˜äº‹ã¯å…¨ã¦ï¼’ã¡ã‚ƒã‚“ã­ã‚‹ã‹ã‚‰ã®å¼•ç”¨è»¢è¼‰ã¨ãªã‚Šã¾ã™ã€‚ <br>
<br>
å½“ã‚µã‚¤ãƒˆã§æ²è¼‰ã€é…ä¿¡ã—ã¦ã„ã‚‹å‹•ç”»åŠã³ç”»åƒã®è‘—ä½œæ¨©ã¾ãŸã¯è‚–åƒæ¨©ç­‰ã¯å„æ¨©åˆ©æ‰€æœ‰è€…ã«å¸°å±è‡´ã—ã¾ã™ã€‚ <br>
ã“ã®ã‚µã‚¤ãƒˆã¯è‘—ä½œæ¨©ã®ä¾µå®³ã‚’ç›®çš„ã¨ã—ãŸã‚µã‚¤ãƒˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ <br>
<br>
ã¾ãŸã€å„æ¨©åˆ©è€…ã€ç¬¬ä¸‰è€…ã«ä¸åˆ©ç›ŠãŒåŠã¶ã“ã¨ã®ãªã„ã‚ˆã†æœ€å¤§é™æ³¨æ„ã—ã¦ãŠã‚Šã¾ã™ãŒ <br>
ã‚‚ã—æ²è¼‰ã«å•é¡ŒãŒã‚ã‚‹äº‹ãŒã‚ã‚Šã¾ã—ãŸã‚‰ãŠæ‰‹æ•°ã§ã™ãŒãƒ¡ãƒ¼ãƒ«ã§ã”é€£çµ¡ä¸‹ã•ã„ã€‚ <br>
æœ€å¤§é™ã€è¿…é€Ÿã«å¯¾å¿œã‚’å–ã‚‰ã›ã¦é ‚ãã¾ã™ã€‚ <br>
<br>
ã€å•ã„åˆã‚ã›ãªã©ã€‘ <br>
ãƒ¡ãƒ¼ãƒ«é ‚ã‘ã‚Œã°å¯¾å¿œã—ã¾ã™ã€‚ <br>
<br>
<br>
ã€é€£çµ¡å…ˆã€‘ <br>
yaruojson@gmail.com <br>
</body>
</html>
